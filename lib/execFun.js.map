{"version":3,"sources":["../src/execFun.js"],"names":["exec","require","execFun","todo","msg","cbk","Array","isArray","t","progressFun","process","stdout","write","setInterval","join","error","stderr","console","dir","clearInterval","log","module","exports"],"mappings":"AAAA;;AAEA;;;;;AAKA,MAAMA,OAAOC,QAAQ,eAAR,EAAyBD,IAAtC;;AAEA;AACA,MAAME,UAAU,CAACC,IAAD,EAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACnC,EAACC,MAAMC,OAAN,CAAcJ,IAAd,CAAD,KAAyBA,OAAO,CAACA,IAAD,CAAhC;AACA,KAAIK,IAAI,EAAR;AACA,KAAIC,cAAc,MAAM;AACvBC,UAAQC,MAAR,CAAeC,KAAf,CAAsB,MAAKR,GAAI,oBAA/B;AACAI,MAAIK,YAAY,MAAM;AACrBH,WAAQC,MAAR,CAAeC,KAAf,CAAqB,GAArB;AACA,GAFG,EAED,GAFC,CAAJ;AAGA,EALD;AAMAH;AACAT,MAAKG,KAAKW,IAAL,CAAU,MAAV,CAAL,EAAwB,CAACC,KAAD,EAAQJ,MAAR,EAAgBK,MAAhB,KAA2B;AAClD,MAAID,KAAJ,EAAW;AACVE,WAAQC,GAAR,CAAYH,KAAZ;AACA;AACDP,OAAKW,cAAcX,CAAd,CAAL;AACAS,UAAQG,GAAR,CAAa,MAAKhB,GAAI,aAAtB;AACAC,SAAO,OAAOA,GAAP,KAAe,UAAtB,IAAoCA,KAApC;AACA,EAPD;AAQA,CAlBD;;AAoBAgB,OAAOC,OAAP,GAAiBpB,OAAjB","file":"execFun.js","sourcesContent":["'use strict';\n\n/**\n * @file 执行函数\n * @author xudeming208@126.com\n */\n\nconst exec = require('child_process').exec;\n\n// execFun\nconst execFun = (todo, msg, cbk) => {\n\t!Array.isArray(todo) && (todo = [todo]);\n\tlet t = '';\n\tlet progressFun = () => {\n\t\tprocess.stdout.write(`\\n\"${msg}\" starting\\n wait.`);\n\t\tt = setInterval(() => {\n\t\t\tprocess.stdout.write('.');\n\t\t}, 500);\n\t};\n\tprogressFun();\n\texec(todo.join(' && '), (error, stdout, stderr) => {\n\t\tif (error) {\n\t\t\tconsole.dir(error);\n\t\t}\n\t\tt && clearInterval(t);\n\t\tconsole.log(`\\n\"${msg}\" finised\\n`);\n\t\tcbk && typeof cbk === 'function' && cbk();\n\t});\n};\n\nmodule.exports = execFun;\n"]}